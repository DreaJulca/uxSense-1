<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>uxSense</title>
    <!-- font awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
        crossorigin="anonymous">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="front.css" media="screen">
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>

<body>
    <div class="grid-container">
        <div class="left">
            <div class="menu">
                <div class="menu-box">
                    <!-- <h6>Search and Filter</h6> -->
                    <nav style="background-color: darkolivegreen">
                        <div class="nav-wrapper">
                            <a href="#" class="brand-logo center" style="color:white">
                                <bold>uxSense</bold>
                            </a>
                            <!-- <ul id="nav-mobile" class="right hide-on-med-and-down">
                                                <li>
                                                    <a href="sass.html">Sass</a>
                                                </li>
                                                <li>
                                                    <a href="badges.html">Components</a>
                                                </li>
                                                <li>
                                                    <a href="collapsible.html">JavaScript</a>
                                                </li>
                                            </ul> -->
                        </div>
                    </nav>
                </div>
            </div>
            <div class="video">
                <div class="video-box">
                    <video id="ux-video" width="600" height="350" style="text-align: center;" controls>
                        <source src="1-p6-coffeemachine.mp4" type="video/mp4">
                        <source src="1-p6-coffeemachine.ogg" type="video/ogg"> Your browser does not support HTML5 video.
                    </video>
                </div>
            </div>
            <div class="timelines">
                <div class="timelines-box">
                    <div class="responsive-table table-status-sheet">
                        <table class="highlight bordered" style="height:310px;">
                            <thead>
                                <tr>
                                    <th class="center" style="width: 20%;">Features</th>
                                    <th class="center" style="width: 80%;">Timelines</th>
                                </tr>
                            </thead>
                            <tbody style="height:250px;">
                                <tr>
                                    <td style="width: 20%;">Video</td>
                                    <td style="width: 80%;">

                                        <canvas id="myCanvas" width="500" height="100" style="border:1px solid #d3d3d3;">
                                           <!-- <script type="text/javascript" src="video-timeline.js"></script> -->
                                           <div id="thumbnails">

                                           </div>
                                        </canvas>
                                        <script>
                                            var video = document.getElementById("ux-video");

                                            var vidTimelineInterval = 30;

                                            function vidTimelineRecur(i, duration){

                                                if(i < duration){
                                                    video.currentTime = i;
                                                    generateThumbnail(i);
                                                    setTimeout(vidTimelineRecur(i+vidTimelineInterval, duration), 500)
                                                }
                                            }

                                            // video.addEventListener('loadeddata', function (){
                                            //     var vidDur = video.duration;

                                            //     var thumbCount = 10;

                                            //     var thumbTimes = [];

                                            //     for (i = 0; i < thumbCount; i++) {
                                            //         thumbTimes.push(Math.round(vidDur / (thumbCount - i)));
                                            //     }
                                            //     thumbTimes=thumbTimes.reverse();

                                            //     var canvas = document.getElementById('myCanvas');
                                            //     var context = canvas.getContext('2d');
                                            //     var dataURL = canvas.toDataURL();
                                            //     for (i = 0; i < thumbCount; i++) {
                                            //         //set the video time
                                            //         video.currentTime = Math.round(thumbTimes[i]);

                                            //         //get the frame and render to canvas; offset dx for each thumbnail
                                            //         context.drawImage(video, i * 10, 0, 20, 20);
                                            //         // alert(video.currentTime);
                                            //     }
                                            // });
                                            video.addEventListener('loadeddata', function () {
                                                    var duration = video.duration;
                                                    vidTimelineRecur(0, duration)
                                                    // var i = 0;
                                                    // var interval = setInterval(function () {
                                                    //     // i = i + 5;
                                                    //     // if (i > duration) clearInterval(interval);
                                                    /*
                                                    for (i=0;i<duration;i+=5){
                                                        video.currentTime = i;
                                                        generateThumbnail(i);
                                                    }*/
                                                });
                                                //     });
                                                // });
                                                function generateThumbnail(i) {
                                                    var canvas = document.getElementById('myCanvas');
                                                    var context = canvas.getContext('2d');
                                                    context.drawImage(video, (i/vidTimelineInterval)* 10, 0, 100, 50);
                                                    var dataURL = canvas.toDataURL();

                                                    var img = document.createElement('img');
                                                    img.setAttribute('src', dataURL);

                                                    document.getElementById('thumbnails').appendChild(img);  
                                                }
                                        </script>

                                        <!-- <script type="text/javascript" src="video-timeline.js"></script> -->
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 20%;">Speech Rate</td>
                                    <td style="width: 80%;">
                                        <div id="speech-rate"></div>
                                        <script type="text/javascript" src="basic-line.js"></script>
                                        <!-- <script type="text/javascript" src="linechart.js"></script> -->
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 20%;">Pitch</td>
                                    <td style="width: 80%;">
                                        <div id="pitch"></div>
                                        <script type="text/javascript" src="linechart.js"></script>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Action1</td>
                                </tr>
                                <tr>
                                    <td>Action2</td>
                                </tr>
                                <tr>
                                    <td>Posture</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="right">
            <div class="search">
                <div class="search-bar">
                    <!-- <h6>Search and Filter</h6> -->
                    <nav>
                        <div class="nav-wrapper">
                            <form>
                                <div class="input-field">
                                    <input id="search" type="search" required placeholder="Search and Filter">
                                    <label class="label-icon" for="search">
                                        <i class="material-icons" style="color:gray">search</i>
                                    </label>
                                    <i class="material-icons" style="color:gray">close</i>
                                </div>
                            </form>
                        </div>
                    </nav>
                </div>
            </div>
            <div class="filter">
                <div class="filter-box">
                    <svg width="600" height="100">
                        <path transform="translate(200, 0)" />
                    </svg>
                    <script>
                        var data = [[0, 50], [100, 80], [200, 40], [300, 60], [400, 30]];

                        var lineGenerator = d3.line();
                        var pathString = lineGenerator(data);

                        d3.select('path')
                            .attr('d', pathString);

                    </script>
                </div>
            </div>
            <div class="annotations">
                <div class="annotations-box">
                    <form accept-charset="UTF-8" action="action_page.php" autocomplete="off" method="GET" target="_blank">
                        <fieldset>
                            <legend> Annotation </legend>
                            <label for="name">Notes</label>
                            <textarea style="height:100px;"></textarea>
                            <br/>
                            <button class="btn" type="submit" value="Submit">Submit</button>
                        </fieldset>
                    </form>
                </div>
            </div>
            <div class="tags">
                <div class="tags-table">
                    <div class="responsive-table table-status-sheet">
                        <table class="highlight bordered">
                            <!-- <colgroup>
                                <col span="1" style="width: 20%;">
                                <col span="1" style="width: 30%;">
                                <col span="1" style="width: 50%;">
                            </colgroup> -->
                            <thead>
                                <tr>
                                    <th class="center" style="width: 20%;">Timestamp</th>
                                    <th class="center" style="width: 30%;">Tags</th>
                                    <th class="center" style="width: 50%;">Annotations</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="width: 20%;">1</td>
                                    <td style="width: 30%;">1</td>
                                    <td style="width: 50%;">Note1</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                </tr>
                                <tr>
                                    <td>5</td>
                                </tr>
                                <tr>
                                    <td>6</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body> 

</html>